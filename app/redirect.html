<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title></title>
</head>

<body>
    <script>
    var arr = location.search.substring(1).split('&');
    var data = {};
    for (var i = 0; i < arr.length; i++) {
        var pos = arr[i].indexOf('=');
        if (pos === -1) {
            continue;
        }
        data[arr[i].substring(0, pos)] = decodeURIComponent(arr[i].substring(pos + 1));
    }
    if (data.code) {
        if (data.scope) {
            location.href = 'http://' + location.hostname + '/#/wechatAuth?code=' + data.code + '&state=' + data.state;
        } else {
            location.href = 'http://' + location.hostname + '/#/?code=' + data.code + '&state=' + data.state;
        }
    } else {
        var url = encodeURIComponent('http://' + location.hostname + '/redirect.html');
        if (data.scope === 'snsapi_userinfo') {
            url = encodeURIComponent('http://' + location.hostname + '/redirect.html?scope=' + data.scope);
        }
        location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx69d84247bc78b780&redirect_uri=" + url + "&response_type=code&scope=" + data.scope + "&state=chuncao#wechat_redirect"
    }
    </script>
</body>

</html>
